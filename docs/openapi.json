{"openapi": "3.1.0", "info": {"title": "kd-schedule", "version": "0.1.0"}, "paths": {"/api/v1/schedule": {"post": {"tags": ["schedule"], "summary": "Create Schedule", "description": "Create a new schedule for a user. If user is not registered, it will be registered first.\nIf end_time and duration are provided, it will use end_time.\nIf only duration is provided, it will use current time + duration.\nIf start_date is provided, it will use start_date.", "operationId": "create_schedule_api_v1_schedule_post", "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/SScheduleCreateRequest"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/SuccessResponseSchema_SScheduleCreateResponse_"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "get": {"tags": ["schedule"], "summary": "Get Schedule", "description": "Get a schedule by id.", "operationId": "get_schedule_api_v1_schedule_get", "parameters": [{"name": "user_id", "in": "query", "required": true, "schema": {"type": "integer", "exclusiveMinimum": 0, "description": "medicine policy number of user", "title": "User Id"}, "description": "medicine policy number of user"}, {"name": "schedule_id", "in": "query", "required": true, "schema": {"type": "string", "format": "uuid", "description": "schedule unique UUID", "title": "Schedule Id"}, "description": "schedule unique UUID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/SuccessResponseSchema_SGetScheduleResponse_"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/schedules": {"get": {"tags": ["schedule"], "summary": "Get Schedules Ids", "description": "Get all schedules ids for a user.", "operationId": "get_schedules_ids_api_v1_schedules_get", "parameters": [{"name": "user_id", "in": "query", "required": true, "schema": {"type": "integer", "exclusiveMinimum": 0, "description": "medicine policy number of user", "title": "User Id"}, "description": "medicine policy number of user"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/SuccessResponseSchema_list_UUID__"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/next_takings": {"get": {"tags": ["schedule"], "summary": "Get Next Takings", "description": "Get next takings for a user.\nIf next_takings is provided, it will use it instead of the default value from the config.", "operationId": "get_next_takings_api_v1_next_takings_get", "parameters": [{"name": "user_id", "in": "query", "required": true, "schema": {"type": "integer", "exclusiveMinimum": 0, "description": "medicine policy number of user", "title": "User Id"}, "description": "medicine policy number of user"}, {"name": "next_takings", "in": "query", "required": false, "schema": {"type": "string", "format": "duration", "description": "Optional manual next_taking interval", "default": "PT1H", "title": "Next Takings"}, "description": "Optional manual next_taking interval"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/SuccessResponseSchema_list_SGetNextTakingsResponse__"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}}, "components": {"schemas": {"HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "SGetNextTakingsResponse": {"properties": {"medicine_name": {"type": "string", "minLength": 1, "title": "Medicine Name"}, "frequency": {"type": "integer", "exclusiveMinimum": 0.0, "title": "Frequency"}, "start_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Date", "description": "timezone is always UTC"}, "end_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Date", "description": "timezone is always UTC"}, "next_taking_time": {"type": "string", "format": "date-time", "title": "Next Taking Time"}}, "type": "object", "required": ["medicine_name", "frequency", "next_taking_time"], "title": "SGetNextTakingsResponse"}, "SGetScheduleResponse": {"properties": {"medicine_name": {"type": "string", "minLength": 1, "title": "Medicine Name"}, "frequency": {"type": "integer", "exclusiveMinimum": 0.0, "title": "Frequency"}, "start_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Date", "description": "timezone is always UTC"}, "end_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Date", "description": "timezone is always UTC"}}, "type": "object", "required": ["medicine_name", "frequency"], "title": "SGetScheduleResponse"}, "SScheduleCreateRequest": {"properties": {"name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name"}, "medicine_policy": {"type": "integer", "exclusiveMinimum": 0.0, "title": "Medicine Policy"}, "medicine_name": {"type": "string", "minLength": 1, "title": "Medicine Name"}, "frequency": {"type": "integer", "exclusiveMinimum": 0.0, "title": "Frequency"}, "start_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Start Date", "description": "timezone is always UTC"}, "end_date": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "End Date", "description": "timezone is always UTC"}, "duration": {"anyOf": [{"type": "string", "format": "duration"}, {"type": "null"}], "title": "Duration"}}, "type": "object", "required": ["medicine_policy", "medicine_name", "frequency"], "title": "SScheduleCreateRequest"}, "SScheduleCreateResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id"}}, "type": "object", "required": ["id"], "title": "SScheduleCreateResponse"}, "SuccessResponseSchema_SGetScheduleResponse_": {"properties": {"success": {"type": "boolean", "title": "Success", "default": true}, "data": {"$ref": "#/components/schemas/SGetScheduleResponse"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}}, "type": "object", "required": ["data"], "title": "SuccessResponseSchema[SGetScheduleResponse]"}, "SuccessResponseSchema_SScheduleCreateResponse_": {"properties": {"success": {"type": "boolean", "title": "Success", "default": true}, "data": {"$ref": "#/components/schemas/SScheduleCreateResponse"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}}, "type": "object", "required": ["data"], "title": "SuccessResponseSchema[SScheduleCreateResponse]"}, "SuccessResponseSchema_list_SGetNextTakingsResponse__": {"properties": {"success": {"type": "boolean", "title": "Success", "default": true}, "data": {"items": {"$ref": "#/components/schemas/SGetNextTakingsResponse"}, "type": "array", "title": "Data"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}}, "type": "object", "required": ["data"], "title": "SuccessResponseSchema[list[SGetNextTakingsResponse]]"}, "SuccessResponseSchema_list_UUID__": {"properties": {"success": {"type": "boolean", "title": "Success", "default": true}, "data": {"items": {"type": "string", "format": "uuid"}, "type": "array", "title": "Data"}, "error": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Error"}}, "type": "object", "required": ["data"], "title": "SuccessResponseSchema[list[UUID]]"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}}}